/*
 * 2013-11-02~03
 * あいや - aiya000
 *
 */

--------- ファイル構成 --------
・ReadMe.txt		|	このファイルです。
・sound_ppoino.c	|	
・sound_ppoino.h	|	プログラムのソースコードです。
・s_ppoino.exe		|	Cygwin用実行ファイルです。
・gcc.sh			|	簡易ビルド用シェルスクリプトです。
-------------------------------


------------- 概要 ------------

本アプリケーションはCUI上で画面を描画できるライブラリ
「Ncurses」を使ったデモです。

このアプリケーションを動かすには、シェル上で
./gcc.sh
./s_ppoino.exe
と入力してください。
わからなかったらそこらへんに居るお兄さんに言いつけてください。

この解説はだいぶ雑で雑で、しかも読んでもあまりためになりません。

この解説を見て気分が悪くなったら僕の書き方のせいですので、
僕を嫌いになっても…C言語は嫌いにならないでくださいっ！！

以下ファイルごとの解説を行っていきます。

---------- .hファイル ----------

/* bool型宣言 */
このエリアではJavaやC++で見られる真偽型「boolean」型を
C言語上で使用できるように定義しています。


/***** グローバル変数 *****/
このアプリケーションソースコード全域で使用することができる変数を宣言しています。
といってもこのアプリケーションのソースコードは.hファイル1つと.cファイル1つですが(笑)。
#define構文では定数を定義することができます(厳密には意味合いが違います)。
これは先ほどのBOOL宣言でも使用しています。

ROWSは棒の数を表しています。
LENGTHは棒の長さ(最大の長さ)を表しています。
soundEffect[][]が棒の実態です。
chara[]は棒を構成する文字を集めた配列です。

runFlagはアプリケーションの稼動制御を行う変数です。
この変数がFALSEになるとアプリケーションは終了します。


/***** 関数 *****/
関数とはメソッドのことです。
エリア名がちゃっちいです。かっこいい言い回し募集。

…ここでは.cファイルで扱われる関数名と引数を宣言しています。
CではJavaと違い、わかりやすいように関数の宣言のみを行うことができます(やっぱりこれも厳密には意味合いが違います)。
もちろん内容ごと記述することもできます。

run()でアプリケーションのコントロールを行っています。
fillSoundEffect()は先ほどのsoundEffect[][]を構築してくれる関数です。
toLower_Rows()では棒を一つずつ細かく落としていく処理を行っています。
draw()でNcursesを用いた画面描画を行っています。

/***** サブスレッド関数 *****/
ちょっと変わった呼び出され方をする関数です。
void型の引数というのもなかなか見ないものですよね？(void*型だけど)
実はこの引数は使われていません(後述)。
waitKey(void *args)内で「qキーが押されるとアプリケーションを終了する」という処理を記述しています。
runFlagと密な関係があります。	//waitKey()攻め、runFlag受けのカップリングです。

--------------------------------


---------- .cファイル ----------

ここまで読んでくれたあなた、すごいですねよく読めますねこんなの。
読み飛ばしてもいいのよ？

.cファイルでは、実際の処理を記述していきます。
といっても.hファイルで定義したものを実際に記述しただけですので、
この先の解説は３つほどしかありません。

#include "sound_ppoino.h"
これで先ほどの定義を読み込んでいます。
その下の#includeでアプリケーションに必要なライブラリを読み込んでいます。

int main()がJavaでいう
public static void main(String[] args)です。
int型の戻り値がついているのは、
「アプリケーションがちゃんと正常終了したか」を確認するためです。

--------------------------------

理解できました？できませんよね、
この解説が下手なだけですので安心してください。

解説は以上となります。
もしこの解説全てを見てくれた人がいたとしたら、
おそろしいです、お礼にこのソースコードをあげましょう。遠慮はいりません。

では、ありがとうございました。
